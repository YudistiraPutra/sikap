-- phpMyAdmin SQL Dump
-- version 4.8.5
-- https://www.phpmyadmin.net/
--
-- Host: localhost
-- Generation Time: May 06, 2019 at 04:16 AM
-- Server version: 10.1.28-MariaDB
-- PHP Version: 7.0.24

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `sikap_sikap`
--

-- --------------------------------------------------------

--
-- Table structure for table `data_kebutuhan`
--

CREATE TABLE `data_kebutuhan` (
  `keb_id` int(11) NOT NULL,
  `keb_jml` double(10,3) NOT NULL,
  `keb_kons_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `data_komoditas`
--

CREATE TABLE `data_komoditas` (
  `id` int(11) NOT NULL,
  `det_kmd_id` int(6) NOT NULL,
  `kec_id` char(3) NOT NULL,
  `tanam` double(10,3) DEFAULT NULL,
  `panen` double(10,3) DEFAULT NULL,
  `provitas` double(10,3) DEFAULT NULL,
  `produksi` double(10,3) NOT NULL,
  `bulan` varchar(15) NOT NULL,
  `tahun` char(4) NOT NULL,
  `ketersediaan` double(10,3) NOT NULL,
  `surplus` double(10,3) DEFAULT NULL,
  `psb` double(10,3) DEFAULT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `data_komoditas`
--

INSERT INTO `data_komoditas` (`id`, `det_kmd_id`, `kec_id`, `tanam`, `panen`, `provitas`, `produksi`, `bulan`, `tahun`, `ketersediaan`, `surplus`, `psb`, `timestamp`) VALUES
(1, 1, '01', 0.000, 4189.000, 70.810, 29664.000, 'JANUARI', '2018', 18611.000, -795.000, NULL, '2019-04-29 09:15:31'),
(2, 2, '01', 0.000, 3146.000, 62.300, 19602.000, 'JANUARI', '2018', 19602.000, 18630.000, NULL, '2019-04-29 09:12:12'),
(3, 3, '01', 0.000, 0.000, 14.490, 0.000, 'JANUARI', '2018', 0.000, -4320.000, NULL, '2019-04-29 09:15:40'),
(4, 4, '01', 0.000, 638.000, 258.780, 16523.000, 'JANUARI', '2018', 16523.000, 13348.000, NULL, '2019-04-29 09:12:34'),
(5, 5, '01', 0.000, 41.000, 121.710, 495.000, 'JANUARI', '2018', 495.000, 365.000, NULL, '2019-04-29 09:12:51'),
(6, 6, '01', 0.000, 18.000, 22.710, 41.000, 'JANUARI', '2018', 41.000, -175.000, NULL, '2019-04-29 09:15:49'),
(7, 7, '01', 0.000, 0.000, 8.750, 0.000, 'JANUARI', '2018', 0.000, -22.000, NULL, '2019-04-29 09:15:57'),
(8, 8, '01', 0.000, 27.000, 11.700, 316.000, 'JANUARI', '2018', 316.000, 208.000, NULL, '2019-04-29 09:13:17'),
(9, 10, '01', 0.000, 65.000, 3.950, 257.000, 'JANUARI', '2018', 257.000, 227.000, NULL, '2019-04-29 09:13:23'),
(10, 11, '01', 0.000, 71.000, 4.940, 351.000, 'JANUARI', '2018', 351.000, 321.000, NULL, '2019-04-29 09:13:33'),
(11, 14, '01', 0.000, 0.000, 0.000, 3067.310, 'JANUARI', '2018', 3067.310, 1577.030, NULL, '2019-04-29 09:16:08'),
(12, 27, '01', 0.000, 0.000, 0.000, 11763.190, 'JANUARI', '2018', 11763.190, 8005.080, NULL, '2019-04-29 09:16:15'),
(13, 30, '01', 0.000, 0.000, 0.000, 3678.810, 'JANUARI', '2018', 3678.810, 1540.580, NULL, '2019-04-29 09:16:22'),
(14, 34, '01', 0.000, 0.000, 0.000, 4493.570, 'JANUARI', '2018', 4493.570, -1230.000, NULL, '2019-04-29 09:16:29'),
(15, 38, '01', 0.000, 0.000, 0.000, 0.000, 'JANUARI', '2018', 0.000, 0.000, NULL, '2019-04-29 09:02:49'),
(33, 1, '01', 0.000, 5268.453, 70.810, 37305.919, 'FEBRUARI', '2018', 23405.734, 3999.669, NULL, '2019-04-29 09:42:34'),
(34, 2, '01', 0.000, 8854.644, 62.300, 55164.429, 'FEBRUARI', '2018', 55164.429, 54192.506, NULL, '2019-04-29 09:42:34'),
(35, 3, '01', 0.000, 29.000, 14.490, 42.021, 'FEBRUARI', '2018', 42.021, -4277.637, NULL, '2019-04-29 09:42:34'),
(36, 4, '01', 0.000, 453.230, 258.780, 11728.686, 'FEBRUARI', '2018', 11728.686, 8553.737, NULL, '2019-04-29 09:42:34'),
(37, 5, '01', 0.000, 55.229, 121.710, 672.192, 'FEBRUARI', '2018', 672.192, 542.602, NULL, '2019-04-29 09:42:34'),
(38, 6, '01', 0.000, 155.769, 22.710, 353.751, 'FEBRUARI', '2018', 353.751, 137.768, NULL, '2019-04-29 09:42:34'),
(39, 7, '01', 0.000, 0.000, 8.750, 0.000, 'FEBRUARI', '2018', 0.000, -21.598, NULL, '2019-04-29 09:42:34'),
(40, 8, '01', 0.000, 26.000, 10.346, 269.000, 'FEBRUARI', '2018', 269.000, 161.009, NULL, '2019-04-29 09:42:34'),
(41, 10, '01', 0.000, 64.000, 5.875, 376.000, 'FEBRUARI', '2018', 376.000, 345.762, NULL, '2019-04-29 09:42:34'),
(42, 11, '01', 0.000, 81.000, 4.309, 349.000, 'FEBRUARI', '2018', 349.000, 318.762, NULL, '2019-04-29 09:42:34'),
(43, 14, '01', 0.000, 0.000, 0.000, 3085.960, 'FEBRUARI', '2018', 3085.960, 1595.678, NULL, '2019-04-29 09:42:34'),
(44, 27, '01', 0.000, 0.000, 0.000, 11834.694, 'FEBRUARI', '2018', 11834.694, 8076.591, NULL, '2019-04-29 09:42:34'),
(45, 30, '01', 0.000, 0.000, 0.000, 3701.178, 'FEBRUARI', '2018', 3701.178, 1562.947, NULL, '2019-04-29 09:42:34'),
(46, 34, '01', 0.000, 0.000, 0.000, 4258.384, 'FEBRUARI', '2018', 4258.384, -1465.163, NULL, '2019-04-29 09:42:34'),
(47, 38, '01', 0.000, 0.000, 0.000, 46667.400, 'FEBRUARI', '2018', 46667.400, 45889.861, NULL, '2019-04-29 09:42:34'),
(48, 1, '01', 0.000, 9548.000, 70.810, 67607.000, 'MARET', '2018', 42416.632, 23010.567, NULL, '2019-04-29 12:44:44'),
(49, 2, '01', 0.000, 7353.000, 62.300, 45811.000, 'MARET', '2018', 45811.000, 44839.077, NULL, '2019-04-29 12:44:44'),
(50, 3, '01', 0.000, 39.000, 14.490, 56.000, 'MARET', '2018', 56.000, -4263.658, NULL, '2019-04-29 12:44:44'),
(51, 4, '01', 0.000, 767.000, 258.780, 19837.000, 'MARET', '2018', 19837.000, 16662.051, NULL, '2019-04-29 12:44:44'),
(52, 5, '01', 0.000, 92.000, 121.710, 1114.000, 'MARET', '2018', 1114.000, 984.410, NULL, '2019-04-29 12:44:44'),
(53, 6, '01', 0.000, 35.000, 22.710, 79.000, 'MARET', '2018', 79.000, -136.983, NULL, '2019-04-29 12:44:44'),
(54, 7, '01', 0.000, 0.000, 0.000, 0.000, 'MARET', '2018', 0.000, -21.598, NULL, '2019-04-29 12:44:44'),
(55, 8, '01', 0.000, 212.000, 11.241, 2383.000, 'MARET', '2018', 2383.000, 2275.009, NULL, '2019-04-29 12:44:44'),
(56, 10, '01', 0.000, 229.000, 5.271, 1207.000, 'MARET', '2018', 1207.000, 1176.762, NULL, '2019-04-29 12:44:44'),
(57, 11, '01', 0.000, 318.000, 5.343, 1699.000, 'MARET', '2018', 1699.000, 1668.762, NULL, '2019-04-29 12:44:44'),
(58, 14, '01', 0.000, 0.000, 0.000, 3169.860, 'MARET', '2018', 3169.860, 1679.578, NULL, '2019-04-29 12:44:44'),
(59, 27, '01', 0.000, 0.000, 0.000, 12156.483, 'MARET', '2018', 12156.483, 8398.380, NULL, '2019-04-29 12:44:44'),
(60, 30, '01', 0.000, 0.000, 0.000, 3801.814, 'MARET', '2018', 3801.814, 1663.584, NULL, '2019-04-29 12:44:44'),
(61, 34, '01', 0.000, 0.000, 0.000, 4887.623, 'MARET', '2018', 4887.623, -835.925, NULL, '2019-04-29 12:44:44'),
(62, 38, '01', 0.000, 0.000, 0.000, 51298.500, 'MARET', '2018', 51298.500, 50520.961, NULL, '2019-04-29 12:44:44'),
(63, 1, '01', 0.000, 9204.163, 70.810, 65174.675, 'APRIL', '2018', 40890.591, 21484.526, NULL, '2019-04-29 12:44:44'),
(64, 2, '01', 0.000, 2407.531, 62.300, 14998.918, 'APRIL', '2018', 14998.918, 14026.995, NULL, '2019-04-29 12:44:44'),
(65, 3, '01', 0.000, 972.457, 14.490, 1409.090, 'APRIL', '2018', 1409.090, -2910.568, NULL, '2019-04-29 12:44:44'),
(66, 4, '01', 0.000, 220.731, 258.780, 5712.064, 'APRIL', '2018', 5712.064, 2537.115, NULL, '2019-04-29 12:44:44'),
(67, 5, '01', 0.000, 91.344, 121.710, 1111.742, 'APRIL', '2018', 1111.742, 982.152, NULL, '2019-04-29 12:44:44'),
(68, 6, '01', 0.000, 49.730, 22.710, 112.938, 'APRIL', '2018', 112.938, -103.045, NULL, '2019-04-29 12:44:44'),
(69, 7, '01', 0.000, 4.000, 8.750, 3.500, 'APRIL', '2018', 3.500, 3.500, NULL, '2019-04-29 12:44:44'),
(70, 8, '01', 0.000, 141.000, 11.787, 1662.000, 'APRIL', '2018', 1662.000, 1554.009, NULL, '2019-04-29 12:44:44'),
(71, 10, '01', 0.000, 179.000, 5.307, 949.900, 'APRIL', '2018', 949.900, 919.662, NULL, '2019-04-29 12:44:44'),
(72, 11, '01', 0.000, 189.000, 4.007, 757.400, 'APRIL', '2018', 757.400, 727.162, NULL, '2019-04-29 12:44:44'),
(73, 14, '01', 0.000, 0.000, 0.000, 2920.027, 'APRIL', '2018', 3504.030, 2013.748, NULL, '2019-04-29 12:44:44'),
(74, 27, '01', 0.000, 0.000, 0.000, 11204.612, 'APRIL', '2018', 11566.050, 7807.947, NULL, '2019-04-29 12:44:44'),
(75, 30, '01', 0.000, 0.000, 0.000, 3374.287, 'APRIL', '2018', 3486.760, 1348.529, NULL, '2019-04-29 12:44:44'),
(76, 34, '01', 0.000, 0.000, 0.000, 5189.948, 'APRIL', '2018', 5189.948, -533.599, NULL, '2019-04-29 12:44:44'),
(77, 38, '01', 0.000, 0.000, 0.000, 51298.500, 'APRIL', '2018', 51298.500, 50520.961, NULL, '2019-04-29 12:44:44'),
(78, 1, '01', 0.000, 6297.252, 70.810, 44590.845, 'MEI', '2018', 27976.296, 8570.231, NULL, '2019-04-29 12:44:44'),
(79, 2, '01', 0.000, 2717.685, 62.300, 16931.178, 'MEI', '2018', 16931.178, 15959.254, NULL, '2019-04-29 12:44:44'),
(80, 3, '01', 0.000, 3691.456, 14.490, 5348.920, 'MEI', '2018', 5348.920, 1029.261, NULL, '2019-04-29 12:44:44'),
(81, 4, '01', 0.000, 427.808, 258.780, 11070.802, 'MEI', '2018', 11070.802, 7895.854, NULL, '2019-04-29 12:44:44'),
(82, 5, '01', 0.000, 98.573, 121.710, 1199.738, 'MEI', '2018', 1199.738, 1070.148, NULL, '2019-04-29 12:44:44'),
(83, 6, '01', 0.000, 47.577, 22.710, 108.046, 'MEI', '2018', 108.046, -107.937, NULL, '2019-04-29 12:44:44'),
(84, 7, '01', 0.000, 2.000, 8.750, 1.750, 'MEI', '2018', 1.750, 1.750, NULL, '2019-04-29 12:44:44'),
(85, 8, '01', 0.000, 49.000, 10.041, 492.000, 'MEI', '2018', 492.000, 384.009, NULL, '2019-04-29 12:44:44'),
(86, 10, '01', 0.000, 268.000, 7.767, 2081.456, 'MEI', '2018', 2081.456, 2051.218, NULL, '2019-04-29 12:44:44'),
(87, 11, '01', 0.000, 208.000, 19.112, 3975.296, 'MEI', '2018', 3975.296, 3945.058, NULL, '2019-04-29 12:44:44'),
(88, 14, '01', 0.000, 0.000, 0.000, 5256.049, 'MEI', '2018', 5256.049, 3765.767, NULL, '2019-04-29 12:44:44'),
(89, 27, '01', 0.000, 0.000, 0.000, 11927.491, 'MEI', '2018', 12414.331, 8656.228, NULL, '2019-04-29 12:44:44'),
(90, 30, '01', 0.000, 0.000, 0.000, 3824.192, 'MEI', '2018', 3722.984, 1584.753, NULL, '2019-04-29 12:44:44'),
(91, 34, '01', 0.000, 0.000, 0.000, 5752.398, 'MEI', '2018', 6008.928, 285.381, NULL, '2019-04-29 12:44:44'),
(92, 38, '01', 0.000, 0.000, 0.000, 7459.100, 'MEI', '2018', 7459.100, 6681.561, NULL, '2019-04-29 12:44:44'),
(93, 1, '01', 0.000, 5229.000, 70.810, 37026.549, 'JUNI', '2018', 23230.457, 3824.392, NULL, '2019-04-29 12:44:44'),
(94, 2, '01', 0.000, 3219.704, 62.300, 20058.759, 'JUNI', '2018', 20058.759, 19086.836, NULL, '2019-04-29 12:44:44'),
(95, 3, '01', 0.000, 3936.603, 14.490, 5704.138, 'JUNI', '2018', 5704.138, 1384.479, NULL, '2019-04-29 12:44:44'),
(96, 4, '01', 0.000, 230.538, 258.780, 5965.862, 'JUNI', '2018', 5965.862, 2790.913, NULL, '2019-04-29 12:44:44'),
(97, 5, '01', 0.000, 87.112, 121.710, 1060.246, 'JUNI', '2018', 1060.246, 930.656, NULL, '2019-04-29 12:44:44'),
(98, 6, '01', 0.000, 66.576, 22.710, 151.195, 'JUNI', '2018', 151.195, -64.788, NULL, '2019-04-29 12:44:44'),
(99, 7, '01', 0.000, 9.000, 8.750, 7.875, 'JUNI', '2018', 7.875, 7.875, NULL, '2019-04-29 12:44:44'),
(100, 8, '01', 0.000, 50.000, 66.522, 3326.100, 'JUNI', '2018', 3326.100, 3218.109, NULL, '2019-04-29 12:44:44'),
(101, 10, '01', 0.000, 143.000, 23.957, 3425.864, 'JUNI', '2018', 3425.864, 3395.626, NULL, '2019-04-29 12:44:44'),
(102, 11, '01', 0.000, 311.000, 17.745, 5518.760, 'JUNI', '2018', 5518.760, 5488.522, NULL, '2019-04-29 12:44:44'),
(103, 14, '01', 0.000, 0.000, 0.000, 3504.032, 'JUNI', '2018', 3504.032, 2013.750, NULL, '2019-04-29 12:44:44'),
(104, 27, '01', 0.000, 0.000, 0.000, 13011.810, 'JUNI', '2018', 13011.810, 9253.707, NULL, '2019-04-29 12:44:44'),
(105, 30, '01', 0.000, 0.000, 0.000, 4049.146, 'JUNI', '2018', 4049.146, 1910.915, NULL, '2019-04-29 12:44:44'),
(106, 34, '01', 0.000, 0.000, 0.000, 5986.924, 'JUNI', '2018', 5986.924, 263.376, NULL, '2019-04-29 12:44:44'),
(107, 38, '01', 0.000, 0.000, 0.000, 0.000, 'JUNI', '2018', 0.000, 0.000, NULL, '2019-04-29 12:44:44'),
(108, 1, '01', 0.000, 6830.000, 70.810, 48363.230, 'JULI', '2018', 30343.091, 10937.025, NULL, '2019-04-29 12:44:44'),
(109, 2, '01', 0.000, 4998.810, 62.300, 31142.586, 'JULI', '2018', 31142.586, 30170.663, NULL, '2019-04-29 12:44:44'),
(110, 3, '01', 0.000, 2274.883, 14.490, 3296.305, 'JULI', '2018', 3296.305, -1023.354, NULL, '2019-04-29 12:44:44'),
(111, 4, '01', 0.000, 684.577, 258.780, 17715.471, 'JULI', '2018', 17715.471, 14540.522, NULL, '2019-04-29 12:44:44'),
(112, 5, '01', 0.000, 62.768, 121.710, 763.949, 'JULI', '2018', 763.949, 634.360, NULL, '2019-04-29 12:44:44'),
(113, 6, '01', 0.000, 93.269, 22.710, 211.813, 'JULI', '2018', 211.813, -4.170, NULL, '2019-04-29 12:44:44'),
(114, 7, '01', 0.000, 0.000, 8.750, 0.000, 'JULI', '2018', 0.000, 0.000, NULL, '2019-04-29 12:44:44'),
(115, 8, '01', 0.000, 33.000, 1.370, 452.000, 'JULI', '2018', 452.000, 344.009, NULL, '2019-04-29 12:44:44'),
(116, 10, '01', 0.000, 128.000, 7.969, 1020.000, 'JULI', '2018', 1020.000, 989.762, NULL, '2019-04-29 12:44:44'),
(117, 11, '01', 0.000, 369.000, 6.198, 2287.000, 'JULI', '2018', 2287.000, 2256.762, NULL, '2019-04-29 12:44:44'),
(118, 14, '01', 0.000, 0.000, 0.000, 2611.623, 'JULI', '2018', 3962.955, 2472.673, NULL, '2019-04-29 12:44:44'),
(119, 27, '01', 0.000, 0.000, 0.000, 12345.369, 'JULI', '2018', 12345.369, 8587.266, NULL, '2019-04-29 12:44:44'),
(120, 30, '01', 0.000, 0.000, 0.000, 3547.107, 'JULI', '2018', 3547.107, 1408.876, NULL, '2019-04-29 12:44:44'),
(121, 34, '01', 0.000, 0.000, 0.000, 8095.545, 'JULI', '2018', 8095.545, 2371.997, NULL, '2019-04-29 12:44:44'),
(122, 38, '01', 0.000, 0.000, 0.000, 27965.300, 'JULI', '2018', 27965.300, 27187.762, NULL, '2019-04-29 12:44:44'),
(123, 1, '01', 0.000, 5548.000, 70.810, 39287.000, 'AGUSTUS', '2018', 24648.664, 5242.599, NULL, '2019-04-29 12:44:44'),
(124, 2, '01', 0.000, 2040.000, 62.300, 12708.000, 'AGUSTUS', '2018', 12708.000, 11736.077, NULL, '2019-04-29 12:44:44'),
(125, 3, '01', 0.000, 22.576, 14.490, 33.000, 'AGUSTUS', '2018', 33.000, -4286.658, NULL, '2019-04-29 12:44:44'),
(126, 4, '01', 0.000, 781.000, 258.780, 20206.000, 'AGUSTUS', '2018', 20206.000, 17031.051, NULL, '2019-04-29 12:44:44'),
(127, 5, '01', 0.000, 30.000, 121.710, 369.000, 'AGUSTUS', '2018', 369.000, 239.410, NULL, '2019-04-29 12:44:44'),
(128, 6, '01', 0.000, 36.000, 22.710, 83.000, 'AGUSTUS', '2018', 83.000, -132.983, NULL, '2019-04-29 12:44:44'),
(129, 7, '01', 0.000, 0.000, 8.750, 0.000, 'AGUSTUS', '2018', 0.000, 0.000, NULL, '2019-04-29 12:44:44'),
(130, 8, '01', 0.000, 26.000, 28.962, 753.000, 'AGUSTUS', '2018', 452.000, 344.009, NULL, '2019-04-29 12:44:44'),
(131, 10, '01', 0.000, 96.000, 8.208, 788.000, 'AGUSTUS', '2018', 1020.000, 989.762, NULL, '2019-04-29 12:44:44'),
(132, 11, '01', 0.000, 119.000, 8.765, 1043.000, 'AGUSTUS', '2018', 2287.000, 2256.762, NULL, '2019-04-29 12:44:44'),
(133, 14, '01', 0.000, 0.000, 0.000, 5677.446, 'AGUSTUS', '2018', 3962.955, 2472.673, NULL, '2019-04-29 12:44:44'),
(134, 27, '01', 0.000, 0.000, 0.000, 12731.162, 'AGUSTUS', '2018', 12731.162, 8973.059, NULL, '2019-04-29 12:44:44'),
(135, 30, '01', 0.000, 0.000, 0.000, 3977.060, 'AGUSTUS', '2018', 3977.060, 1838.829, NULL, '2019-04-29 12:44:44'),
(136, 34, '01', 0.000, 0.000, 0.000, 7505.459, 'AGUSTUS', '2018', 7505.459, 1781.912, NULL, '2019-04-29 12:44:44'),
(137, 38, '01', 0.000, 0.000, 0.000, 92223.700, 'AGUSTUS', '2018', 92223.700, 91446.162, NULL, '2019-04-29 12:44:44'),
(138, 1, '01', 0.000, 4439.784, 70.810, 31438.000, 'SEPTEMBER', '2018', 19724.201, 318.136, NULL, '2019-04-29 12:44:44'),
(139, 2, '01', 0.000, 1836.714, 62.300, 11443.000, 'SEPTEMBER', '2018', 11443.000, 10471.077, NULL, '2019-04-29 12:44:44'),
(140, 3, '01', 0.000, 118.230, 14.490, 171.000, 'SEPTEMBER', '2018', 171.000, -4148.658, NULL, '2019-04-29 12:44:44'),
(141, 4, '01', 0.000, 1046.884, 258.780, 27091.000, 'SEPTEMBER', '2018', 27091.000, 23916.051, NULL, '2019-04-29 12:44:44'),
(142, 5, '01', 0.000, 50.191, 121.710, 611.000, 'SEPTEMBER', '2018', 611.000, 481.410, NULL, '2019-04-29 12:44:44'),
(143, 6, '01', 0.000, 21.538, 22.710, 49.000, 'SEPTEMBER', '2018', 49.000, -166.983, NULL, '2019-04-29 12:44:44'),
(144, 7, '01', 0.000, 0.000, 8.750, 0.000, 'SEPTEMBER', '2018', 0.000, -21.598, NULL, '2019-04-29 12:44:44'),
(145, 8, '01', 0.000, 77.000, 10.753, 828.000, 'SEPTEMBER', '2018', 828.000, 720.009, NULL, '2019-04-29 12:44:44'),
(146, 10, '01', 0.000, 133.000, 12.180, 1620.000, 'SEPTEMBER', '2018', 1620.000, 1589.762, NULL, '2019-04-29 12:44:44'),
(147, 11, '01', 0.000, 256.000, 18.809, 4815.000, 'SEPTEMBER', '2018', 4815.000, 4784.762, NULL, '2019-04-29 12:44:44'),
(148, 14, '01', 0.000, 0.000, 0.000, 3065.814, 'SEPTEMBER', '2018', 3065.814, 1575.532, NULL, '2019-04-29 12:44:44'),
(149, 27, '01', 0.000, 0.000, 0.000, 13502.747, 'SEPTEMBER', '2018', 13502.747, 9744.644, NULL, '2019-04-29 12:44:44'),
(150, 30, '01', 0.000, 0.000, 0.000, 3224.643, 'SEPTEMBER', '2018', 3224.643, 1086.412, NULL, '2019-04-29 12:44:44'),
(151, 34, '01', 0.000, 0.000, 0.000, 6769.589, 'SEPTEMBER', '2018', 6769.589, 1046.042, NULL, '2019-04-29 12:44:44'),
(152, 38, '01', 0.000, 0.000, 0.000, 110223.000, 'SEPTEMBER', '2018', 110223.000, 109445.462, NULL, '2019-04-29 12:44:44'),
(153, 1, '01', 0.000, 5005.000, 70.810, 35440.405, 'OKTOBER', '2018', 22235.310, 2823.000, NULL, '2019-04-29 12:44:44'),
(154, 2, '01', 0.000, 1317.000, 62.300, 8204.910, 'OKTOBER', '2018', 8204.910, 7232.987, NULL, '2019-04-29 12:44:44'),
(155, 3, '01', 0.000, 224.000, 14.490, 324.576, 'OKTOBER', '2018', 324.576, -3995.082, NULL, '2019-04-29 12:44:44'),
(156, 4, '01', 0.000, 704.000, 258.780, 18218.112, 'OKTOBER', '2018', 18218.112, 15043.163, NULL, '2019-04-29 12:44:44'),
(157, 5, '01', 0.000, 31.000, 121.710, 377.301, 'OKTOBER', '2018', 377.301, 247.711, NULL, '2019-04-29 12:44:44'),
(158, 6, '01', 0.000, 30.000, 22.710, 68.130, 'OKTOBER', '2018', 68.130, -147.853, NULL, '2019-04-29 12:44:44'),
(159, 7, '01', 0.000, 0.000, 8.750, 0.000, 'OKTOBER', '2018', 0.000, 0.000, NULL, '2019-04-29 12:44:44'),
(160, 8, '01', 0.000, 52.000, 10.753, 571.000, 'OKTOBER', '2018', 571.000, 463.009, NULL, '2019-04-29 12:44:44'),
(161, 10, '01', 0.000, 117.000, 6.991, 818.000, 'OKTOBER', '2018', 818.000, 787.762, NULL, '2019-04-29 12:44:44'),
(162, 11, '01', 0.000, 377.000, 7.064, 2663.000, 'OKTOBER', '2018', 2663.000, 2632.762, NULL, '2019-04-29 12:44:44'),
(163, 14, '01', 0.000, 0.000, 0.000, 3305.090, 'OKTOBER', '2018', 3305.090, 1814.808, NULL, '2019-04-29 12:44:44'),
(164, 27, '01', 0.000, 0.000, 0.000, 12292.371, 'OKTOBER', '2018', 12292.371, 8534.268, NULL, '2019-04-29 12:44:44'),
(165, 30, '01', 0.000, 0.000, 0.000, 4125.261, 'OKTOBER', '2018', 4125.261, 1987.030, NULL, '2019-04-29 12:44:44'),
(166, 34, '01', 0.000, 0.000, 0.000, 5502.571, 'OKTOBER', '2018', 5502.571, -220.976, NULL, '2019-04-29 12:44:44'),
(167, 38, '01', 0.000, 0.000, 0.000, 411236.700, 'OKTOBER', '2018', 411236.700, 410459.161, NULL, '2019-04-29 12:44:44'),
(168, 1, '01', 0.000, 4762.000, 70.810, 33719.722, 'NOVEMBER', '2018', 21155.754, 10743.000, NULL, '2019-04-29 12:44:44'),
(169, 2, '01', 0.000, 2307.000, 62.300, 14372.610, 'NOVEMBER', '2018', 14372.610, 13400.687, NULL, '2019-04-29 12:44:44'),
(170, 3, '01', 0.000, 442.000, 14.490, 640.458, 'NOVEMBER', '2018', 640.458, -3679.200, NULL, '2019-04-29 12:44:44'),
(171, 4, '01', 0.000, 391.000, 258.780, 10118.298, 'NOVEMBER', '2018', 10118.298, 6943.349, NULL, '2019-04-29 12:44:44'),
(172, 5, '01', 0.000, 42.000, 121.710, 511.182, 'NOVEMBER', '2018', 511.182, 381.592, NULL, '2019-04-29 12:44:44'),
(173, 6, '01', 0.000, 17.000, 22.710, 38.607, 'NOVEMBER', '2018', 38.607, -177.376, NULL, '2019-04-29 12:44:44'),
(174, 7, '01', 0.000, 0.000, 8.750, 0.000, 'NOVEMBER', '2018', 0.000, 0.000, NULL, '2019-04-29 12:44:44'),
(175, 8, '01', 0.000, 318.000, 105.314, 33490.000, 'NOVEMBER', '2018', 33490.000, 33382.009, NULL, '2019-04-29 12:44:44'),
(176, 10, '01', 0.000, 117.000, 63.342, 7411.000, 'NOVEMBER', '2018', 7411.000, 7380.762, NULL, '2019-04-29 12:44:44'),
(177, 11, '01', 0.000, 310.000, 77.645, 24070.000, 'NOVEMBER', '2018', 24070.000, 24039.762, NULL, '2019-04-29 12:44:44'),
(178, 14, '01', 0.000, 0.000, 0.000, 3501.460, 'NOVEMBER', '2018', 3501.460, 2011.178, NULL, '2019-04-29 12:44:44'),
(179, 27, '01', 0.000, 0.000, 0.000, 12676.508, 'NOVEMBER', '2018', 12676.508, 8918.405, NULL, '2019-04-29 12:44:44'),
(180, 30, '01', 0.000, 0.000, 0.000, 4254.174, 'NOVEMBER', '2018', 4254.174, 2115.943, NULL, '2019-04-29 12:44:44'),
(181, 34, '01', 0.000, 0.000, 0.000, 6050.059, 'NOVEMBER', '2018', 6050.059, 326.511, NULL, '2019-04-29 12:44:44'),
(182, 38, '01', 0.000, 0.000, 0.000, 411236.700, 'NOVEMBER', '2018', 411236.700, 410459.161, NULL, '2019-04-29 12:44:44'),
(183, 1, '01', 0.000, 4030.000, 70.810, 28536.430, 'DESEMBER', '2018', 17903.756, -1509.000, NULL, '2019-04-29 12:44:44'),
(184, 2, '01', 0.000, 2003.000, 62.300, 12478.690, 'DESEMBER', '2018', 12478.690, 11506.767, NULL, '2019-04-29 12:44:44'),
(185, 3, '01', 0.000, 30.000, 14.490, 43.470, 'DESEMBER', '2018', 43.470, -4276.188, NULL, '2019-04-29 12:44:44'),
(186, 4, '01', 0.000, 385.000, 258.780, 9963.030, 'DESEMBER', '2018', 9963.030, 6788.081, NULL, '2019-04-29 12:44:44'),
(187, 5, '01', 0.000, 58.000, 121.710, 705.918, 'DESEMBER', '2018', 705.918, 576.328, NULL, '2019-04-29 12:44:44'),
(188, 6, '01', 0.000, 33.000, 22.710, 74.943, 'DESEMBER', '2018', 74.943, -141.040, NULL, '2019-04-29 12:44:44'),
(189, 7, '01', 0.000, 0.000, 8.750, 0.000, 'DESEMBER', '2018', 0.000, 0.000, NULL, '2019-04-29 12:44:44'),
(190, 8, '01', 0.000, 65.000, 102.308, 6650.000, 'DESEMBER', '2018', 6650.000, 6542.009, NULL, '2019-04-29 12:44:44'),
(191, 10, '01', 0.000, 135.000, 67.222, 9075.000, 'DESEMBER', '2018', 9075.000, 9044.762, NULL, '2019-04-29 12:44:44'),
(192, 11, '01', 0.000, 169.000, 74.775, 12637.000, 'DESEMBER', '2018', 12637.000, 12606.762, NULL, '2019-04-29 12:44:44'),
(193, 14, '01', 0.000, 0.000, 0.000, 3798.500, 'DESEMBER', '2018', 3798.500, 2308.218, NULL, '2019-04-29 12:44:44'),
(194, 27, '01', 0.000, 0.000, 0.000, 13444.782, 'DESEMBER', '2018', 13444.782, 9686.679, NULL, '2019-04-29 12:44:44'),
(195, 30, '01', 0.000, 0.000, 0.000, 4512.004, 'DESEMBER', '2018', 4512.004, 2373.773, NULL, '2019-04-29 12:44:44'),
(196, 34, '01', 0.000, 0.000, 0.000, 4948.349, 'DESEMBER', '2018', 4948.349, -775.199, NULL, '2019-04-29 12:44:44'),
(197, 38, '01', 0.000, 0.000, 0.000, 110223.000, 'DESEMBER', '2018', 110223.000, 109445.462, NULL, '2019-04-29 12:44:44');

--
-- Triggers `data_komoditas`
--
DELIMITER $$
CREATE TRIGGER `before_insert_data_komoditas` BEFORE INSERT ON `data_komoditas` FOR EACH ROW BEGIN
    DECLARE kec_id_var varchar(3);
    DECLARE det_kmd_id_var int;
    DECLARE bln_var varchar(15);
    DECLARE thn_var varchar(4);
    DECLARE tanam_sum double;
    DECLARE panen_sum double;
    DECLARE provitas_sum double;
    DECLARE produksi_sum double;
    DECLARE ketersediaan_sum double;


    SET kec_id_var = new.kec_id;
    SET det_kmd_id_var = new.det_kmd_id;
    SET bln_var = new.bulan;
    SET thn_var = new.tahun;

    SET tanam_sum = (SELECT SUM(tanam) FROM data_komoditas 
                    WHERE det_kmd_id = det_kmd_id_var AND bulan = bln_var AND tahun = thn_var);
    SET panen_sum = (SELECT SUM(panen) FROM data_komoditas
                    WHERE det_kmd_id = det_kmd_id_var AND bulan = bln_var AND tahun = thn_var);
    SET provitas_sum = (SELECT SUM(provitas) FROM data_komoditas
                    WHERE det_kmd_id = det_kmd_id_var AND bulan = bln_var AND tahun = thn_var);
    SET produksi_sum = (SELECT SUM(produksi) FROM data_komoditas
                    WHERE det_kmd_id = det_kmd_id_var AND bulan = bln_var AND tahun = thn_var);
    SET ketersediaan_sum = (SELECT SUM(ketersediaan) FROM data_komoditas
                    WHERE det_kmd_id = det_kmd_id_var AND bulan = bln_var AND tahun = thn_var);


    IF NOT EXISTS (SELECT * FROM data_komoditas 
        WHERE kec_id = kec_id_var AND det_kmd_id = det_kmd_id_var
        AND bulan = bln_var AND tahun = thn_var)
        THEN
            BEGIN
                INSERT INTO data_komoditas 
                (`det_kmd_id`, `kec_id`, `tanam`, `panen`, `provitas`, `produksi`, `bulan`, `tahun`, `ketersediaan`) VALUES (new.det_kmd_id, new.kec_id, new.tanam, new.panen, new.provitas, new.produksi, new.bulan, new.tahun, new.ketersediaan);
                INSERT INTO data_komoditas 
                (`det_kmd_id`, `kec_id`, `tanam`, `panen`, `provitas`, `produksi`, `bulan`, `tahun`, `ketersediaan`)VALUES 
                ( new.det_kmd_id, '01', tanam_sum, panen_sum, provitas_sum, produksi_sum, new.bulan, new.tahun, ketersediaan_sum);
            END;
    END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `data_konsumsi`
--

CREATE TABLE `data_konsumsi` (
  `kons_id` int(11) NOT NULL,
  `kons_jml` double(10,3) NOT NULL,
  `kons_bulan` varchar(15) NOT NULL,
  `kons_thn` char(4) NOT NULL,
  `kons_kec_id` char(3) NOT NULL,
  `kons_det_kmd_id` int(6) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `data_konsumsi`
--

INSERT INTO `data_konsumsi` (`kons_id`, `kons_jml`, `kons_bulan`, `kons_thn`, `kons_kec_id`, `kons_det_kmd_id`) VALUES
(1, 7.487, 'JANUARI', '2018', '01', 1),
(2, 0.375, 'JANUARI', '2018', '01', 2),
(3, 1.667, 'JANUARI', '2018', '01', 3),
(4, 1.225, 'JANUARI', '2018', '01', 4),
(5, 0.050, 'JANUARI', '2018', '01', 5),
(6, 0.083, 'JANUARI', '2018', '01', 6),
(7, 0.008, 'JANUARI', '2018', '01', 7),
(8, 0.042, 'JANUARI', '2018', '01', 8),
(9, 0.012, 'JANUARI', '2018', '01', 10),
(10, 0.012, 'JANUARI', '2018', '01', 11),
(11, 0.575, 'JANUARI', '2018', '01', 14),
(12, 1.450, 'JANUARI', '2018', '01', 27),
(13, 0.825, 'JANUARI', '2018', '01', 30),
(14, 2.208, 'JANUARI', '2018', '01', 34),
(15, 0.300, 'JANUARI', '2018', '01', 38),
(16, 7.487, 'FEBRUARI', '2018', '01', 1),
(17, 0.375, 'FEBRUARI', '2018', '01', 2),
(18, 1.667, 'FEBRUARI', '2018', '01', 3),
(19, 1.225, 'FEBRUARI', '2018', '01', 4),
(20, 0.050, 'FEBRUARI', '2018', '01', 5),
(21, 0.083, 'FEBRUARI', '2018', '01', 6),
(22, 0.008, 'FEBRUARI', '2018', '01', 7),
(23, 0.042, 'FEBRUARI', '2018', '01', 8),
(24, 0.012, 'FEBRUARI', '2018', '01', 10),
(25, 0.012, 'FEBRUARI', '2018', '01', 11),
(26, 0.575, 'FEBRUARI', '2018', '01', 14),
(27, 1.450, 'FEBRUARI', '2018', '01', 27),
(28, 0.825, 'FEBRUARI', '2018', '01', 30),
(29, 2.208, 'FEBRUARI', '2018', '01', 34),
(30, 0.300, 'FEBRUARI', '2018', '01', 38),
(31, 7.487, 'MARET', '2018', '01', 1),
(32, 0.375, 'MARET', '2018', '01', 2),
(33, 1.667, 'MARET', '2018', '01', 3),
(34, 1.225, 'MARET', '2018', '01', 4),
(35, 0.050, 'MARET', '2018', '01', 5),
(36, 0.083, 'MARET', '2018', '01', 6),
(37, 0.008, 'MARET', '2018', '01', 7),
(38, 0.042, 'MARET', '2018', '01', 8),
(39, 0.012, 'MARET', '2018', '01', 10),
(40, 0.012, 'MARET', '2018', '01', 11),
(41, 0.575, 'MARET', '2018', '01', 14),
(42, 1.450, 'MARET', '2018', '01', 27),
(43, 0.825, 'MARET', '2018', '01', 30),
(44, 2.208, 'MARET', '2018', '01', 34),
(45, 0.300, 'MARET', '2018', '01', 38),
(46, 7.487, 'APRIL', '2018', '01', 1),
(47, 0.375, 'APRIL', '2018', '01', 2),
(48, 1.667, 'APRIL', '2018', '01', 3),
(49, 1.225, 'APRIL', '2018', '01', 4),
(50, 0.050, 'APRIL', '2018', '01', 5),
(51, 0.083, 'APRIL', '2018', '01', 6),
(52, 0.008, 'APRIL', '2018', '01', 7),
(53, 0.042, 'APRIL', '2018', '01', 8),
(54, 0.012, 'APRIL', '2018', '01', 10),
(55, 0.012, 'APRIL', '2018', '01', 11),
(56, 0.575, 'APRIL', '2018', '01', 14),
(57, 1.450, 'APRIL', '2018', '01', 27),
(58, 0.825, 'APRIL', '2018', '01', 30),
(59, 2.208, 'APRIL', '2018', '01', 34),
(60, 0.300, 'APRIL', '2018', '01', 38),
(61, 7.487, 'MEI', '2018', '01', 1),
(62, 0.375, 'MEI', '2018', '01', 2),
(63, 1.667, 'MEI', '2018', '01', 3),
(64, 1.225, 'MEI', '2018', '01', 4),
(65, 0.050, 'MEI', '2018', '01', 5),
(66, 0.083, 'MEI', '2018', '01', 6),
(67, 0.008, 'MEI', '2018', '01', 7),
(68, 0.042, 'MEI', '2018', '01', 8),
(69, 0.012, 'MEI', '2018', '01', 10),
(70, 0.012, 'MEI', '2018', '01', 11),
(71, 0.575, 'MEI', '2018', '01', 14),
(72, 1.450, 'MEI', '2018', '01', 27),
(73, 0.825, 'MEI', '2018', '01', 30),
(74, 2.208, 'MEI', '2018', '01', 34),
(75, 0.300, 'MEI', '2018', '01', 38),
(76, 7.487, 'JUNI', '2018', '01', 1),
(77, 0.375, 'JUNI', '2018', '01', 2),
(78, 1.667, 'JUNI', '2018', '01', 3),
(79, 1.225, 'JUNI', '2018', '01', 4),
(80, 0.050, 'JUNI', '2018', '01', 5),
(81, 0.083, 'JUNI', '2018', '01', 6),
(82, 0.008, 'JUNI', '2018', '01', 7),
(83, 0.042, 'JUNI', '2018', '01', 8),
(84, 0.012, 'JUNI', '2018', '01', 10),
(85, 0.012, 'JUNI', '2018', '01', 11),
(86, 0.575, 'JUNI', '2018', '01', 14),
(87, 1.450, 'JUNI', '2018', '01', 27),
(88, 0.825, 'JUNI', '2018', '01', 30),
(89, 2.208, 'JUNI', '2018', '01', 34),
(90, 0.300, 'JUNI', '2018', '01', 38),
(91, 7.487, 'JULI', '2018', '01', 1),
(92, 0.375, 'JULI', '2018', '01', 2),
(93, 1.667, 'JULI', '2018', '01', 3),
(94, 1.225, 'JULI', '2018', '01', 4),
(95, 0.050, 'JULI', '2018', '01', 5),
(96, 0.083, 'JULI', '2018', '01', 6),
(97, 0.008, 'JULI', '2018', '01', 7),
(98, 0.042, 'JULI', '2018', '01', 8),
(99, 0.012, 'JULI', '2018', '01', 10),
(100, 0.012, 'JULI', '2018', '01', 11),
(101, 0.575, 'JULI', '2018', '01', 14),
(102, 1.450, 'JULI', '2018', '01', 27),
(103, 0.825, 'JULI', '2018', '01', 30),
(104, 2.208, 'JULI', '2018', '01', 34),
(105, 0.300, 'JULI', '2018', '01', 38),
(106, 7.487, 'AGUSTUS', '2018', '01', 1),
(107, 0.375, 'AGUSTUS', '2018', '01', 2),
(108, 1.667, 'AGUSTUS', '2018', '01', 3),
(109, 1.225, 'AGUSTUS', '2018', '01', 4),
(110, 0.050, 'AGUSTUS', '2018', '01', 5),
(111, 0.083, 'AGUSTUS', '2018', '01', 6),
(112, 0.008, 'AGUSTUS', '2018', '01', 7),
(113, 0.042, 'AGUSTUS', '2018', '01', 8),
(114, 0.012, 'AGUSTUS', '2018', '01', 10),
(115, 0.012, 'AGUSTUS', '2018', '01', 11),
(116, 0.575, 'AGUSTUS', '2018', '01', 14),
(117, 1.450, 'AGUSTUS', '2018', '01', 27),
(118, 0.825, 'AGUSTUS', '2018', '01', 30),
(119, 2.208, 'AGUSTUS', '2018', '01', 34),
(120, 0.300, 'AGUSTUS', '2018', '01', 38),
(121, 7.487, 'SEPTEMBER', '2018', '01', 1),
(122, 0.375, 'SEPTEMBER', '2018', '01', 2),
(123, 1.667, 'SEPTEMBER', '2018', '01', 3),
(124, 1.225, 'SEPTEMBER', '2018', '01', 4),
(125, 0.050, 'SEPTEMBER', '2018', '01', 5),
(126, 0.083, 'SEPTEMBER', '2018', '01', 6),
(127, 0.008, 'SEPTEMBER', '2018', '01', 7),
(128, 0.042, 'SEPTEMBER', '2018', '01', 8),
(129, 0.012, 'SEPTEMBER', '2018', '01', 10),
(130, 0.012, 'SEPTEMBER', '2018', '01', 11),
(131, 0.575, 'SEPTEMBER', '2018', '01', 14),
(132, 1.450, 'SEPTEMBER', '2018', '01', 27),
(133, 0.825, 'SEPTEMBER', '2018', '01', 30),
(134, 2.208, 'SEPTEMBER', '2018', '01', 34),
(135, 0.300, 'SEPTEMBER', '2018', '01', 38),
(136, 7.487, 'OKTOBER', '2018', '01', 1),
(137, 0.375, 'OKTOBER', '2018', '01', 2),
(138, 1.667, 'OKTOBER', '2018', '01', 3),
(139, 1.225, 'OKTOBER', '2018', '01', 4),
(140, 0.050, 'OKTOBER', '2018', '01', 5),
(141, 0.083, 'OKTOBER', '2018', '01', 6),
(142, 0.008, 'OKTOBER', '2018', '01', 7),
(143, 0.042, 'OKTOBER', '2018', '01', 8),
(144, 0.012, 'OKTOBER', '2018', '01', 10),
(145, 0.012, 'OKTOBER', '2018', '01', 11),
(146, 0.575, 'OKTOBER', '2018', '01', 14),
(147, 1.450, 'OKTOBER', '2018', '01', 27),
(148, 0.825, 'OKTOBER', '2018', '01', 30),
(149, 2.208, 'OKTOBER', '2018', '01', 34),
(150, 0.300, 'OKTOBER', '2018', '01', 38),
(151, 7.487, 'NOPEMBER', '2018', '01', 1),
(152, 0.375, 'NOPEMBER', '2018', '01', 2),
(153, 1.667, 'NOPEMBER', '2018', '01', 3),
(154, 1.225, 'NOPEMBER', '2018', '01', 4),
(155, 0.050, 'NOPEMBER', '2018', '01', 5),
(156, 0.083, 'NOPEMBER', '2018', '01', 6),
(157, 0.008, 'NOPEMBER', '2018', '01', 7),
(158, 0.042, 'NOPEMBER', '2018', '01', 8),
(159, 0.012, 'NOPEMBER', '2018', '01', 10),
(160, 0.012, 'NOPEMBER', '2018', '01', 11),
(161, 0.575, 'NOPEMBER', '2018', '01', 14),
(162, 1.450, 'NOPEMBER', '2018', '01', 27),
(163, 0.825, 'NOPEMBER', '2018', '01', 30),
(164, 2.208, 'NOPEMBER', '2018', '01', 34),
(165, 0.300, 'NOPEMBER', '2018', '01', 38),
(166, 7.487, 'DESEMBER', '2018', '01', 1),
(167, 0.375, 'DESEMBER', '2018', '01', 2),
(168, 1.667, 'DESEMBER', '2018', '01', 3),
(169, 1.225, 'DESEMBER', '2018', '01', 4),
(170, 0.050, 'DESEMBER', '2018', '01', 5),
(171, 0.083, 'DESEMBER', '2018', '01', 6),
(172, 0.008, 'DESEMBER', '2018', '01', 7),
(173, 0.042, 'DESEMBER', '2018', '01', 8),
(174, 0.012, 'DESEMBER', '2018', '01', 10),
(175, 0.012, 'DESEMBER', '2018', '01', 11),
(176, 0.575, 'DESEMBER', '2018', '01', 14),
(177, 1.450, 'DESEMBER', '2018', '01', 27),
(178, 0.825, 'DESEMBER', '2018', '01', 30),
(179, 2.208, 'DESEMBER', '2018', '01', 34),
(180, 0.300, 'DESEMBER', '2018', '01', 38);

--
-- Triggers `data_konsumsi`
--
DELIMITER $$
CREATE TRIGGER `dt_kbutuhan_insert_konsumsi` AFTER INSERT ON `data_konsumsi` FOR EACH ROW BEGIN

  if exists(select p.pend_jml from data_penduduk p where p.pend_kec_id=NEW.kons_kec_id and p.pend_thn=NEW.kons_thn)
  THEN BEGIN
   INSERT INTO data_kebutuhan
  (keb_jml, keb_kons_id)
   VALUES
   ( (NEW.kons_jml*(select p.pend_jml from data_penduduk p where p.pend_kec_id=NEW.kons_kec_id and p.pend_thn=NEW.kons_thn)/1000), NEW.kons_id);
  END; END IF;
   END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `dt_kbutuhan_update_konsumsi` AFTER UPDATE ON `data_konsumsi` FOR EACH ROW BEGIN

  if exists(select p.pend_jml from data_penduduk p where p.pend_kec_id=NEW.kons_kec_id and p.pend_thn=NEW.kons_thn)
  THEN BEGIN
   update data_kebutuhan
   set keb_jml=(NEW.kons_jml*(select p.pend_jml from data_penduduk p where p.pend_kec_id=NEW.kons_kec_id and p.pend_thn=NEW.kons_thn)/1000)
   where keb_kons_id = NEW.kons_id;
  END; END IF;
   END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `data_penduduk`
--

CREATE TABLE `data_penduduk` (
  `pend_id` int(11) NOT NULL,
  `pend_jml` int(11) NOT NULL,
  `pend_thn` char(4) NOT NULL,
  `pend_kec_id` char(3) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `data_penduduk`
--

INSERT INTO `data_penduduk` (`pend_id`, `pend_jml`, `pend_thn`, `pend_kec_id`) VALUES
(0, 2591795, '2018', '01'),
(1, 52302, '2018', 'APG'),
(2, 68895, '2018', 'BTR'),
(3, 72280, '2018', 'BLW'),
(4, 118818, '2018', 'DPT'),
(5, 79317, '2018', 'DAU'),
(6, 62636, '2018', 'DNO'),
(7, 53204, '2018', 'GDG'),
(8, 85993, '2018', 'GDL'),
(9, 74834, '2018', 'JBG'),
(10, 59990, '2018', 'KPR'),
(11, 86235, '2018', 'KPL'),
(12, 31395, '2018', 'KSB'),
(13, 108551, '2018', 'KPJ'),
(14, 38149, '2018', 'KRM'),
(15, 112904, '2018', 'LWG'),
(16, 49393, '2018', 'NJM'),
(17, 56424, '2018', 'NGT'),
(18, 45708, '2018', 'PGK'),
(19, 67827, '2018', 'PGL'),
(20, 164377, '2018', 'PKS'),
(21, 91168, '2018', 'PKJ'),
(22, 92781, '2018', 'PCM'),
(23, 68494, '2018', 'PJN'),
(24, 185807, '2018', 'SGR'),
(25, 90275, '2018', 'SMW'),
(26, 54784, '2018', 'SPC'),
(27, 54622, '2018', 'TJN'),
(28, 60916, '2018', 'TYD'),
(29, 75651, '2018', 'TMP'),
(30, 114937, '2018', 'TRN'),
(31, 90720, '2018', 'WGR'),
(32, 81117, '2018', 'WJK'),
(33, 41375, '2018', 'WNS');

--
-- Triggers `data_penduduk`
--
DELIMITER $$
CREATE TRIGGER `dt_kbutuhan_insert_jml_penduduk_nocheck` AFTER INSERT ON `data_penduduk` FOR EACH ROW BEGIN

  if exists(select k.kons_jml from data_konsumsi k where k.kons_kec_id=NEW.pend_kec_id and k.kons_thn=NEW.pend_thn)
  
  THEN BEGIN
   INSERT INTO data_kebutuhan
  (keb_jml, keb_kons_id)
   VALUES
   ( (NEW.pend_jml*(select k.kons_jml from data_konsumsi k where k.kons_kec_id=NEW.pend_kec_id and k.kons_thn=NEW.pend_thn)/1000), (select k.kons_id from data_konsumsi k where k.kons_kec_id=NEW.pend_kec_id and k.kons_thn=NEW.pend_thn));
  END; END IF;
   END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `dt_kebutuhan_update_jml_penduduk_nocheck` AFTER UPDATE ON `data_penduduk` FOR EACH ROW BEGIN

  if exists(select k.kons_jml from data_konsumsi k where k.kons_kec_id=NEW.pend_kec_id and k.kons_thn=NEW.pend_thn)
  
  THEN BEGIN
   UPDATE data_kebutuhan
   set keb_jml= (NEW.pend_jml*(select k.kons_jml from data_konsumsi k where k.kons_kec_id=NEW.pend_kec_id and k.kons_thn=NEW.pend_thn)/1000)
   where keb_kons_id= (select k.kons_id from data_konsumsi k where k.kons_kec_id=NEW.pend_kec_id and k.kons_thn=NEW.pend_thn);

  END; END IF;
   END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `detil_komoditas`
--

CREATE TABLE `detil_komoditas` (
  `det_kmd_id` int(6) NOT NULL,
  `det_kmd_nama` varchar(30) NOT NULL,
  `komoditas_kmd_id` int(6) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `detil_komoditas`
--

INSERT INTO `detil_komoditas` (`det_kmd_id`, `det_kmd_nama`, `komoditas_kmd_id`) VALUES
(0, 'Beras', 1),
(1, 'Padi', 1),
(2, 'Jagung', 2),
(3, 'Kedelai', 3),
(4, 'Ubi Kayu', 4),
(5, 'Ubi Jalar', 5),
(6, 'Kacang Tanah', 6),
(7, 'Kacang Hijau', 7),
(8, 'Bawang Merah', 8),
(9, 'Bawang Putih', 8),
(10, 'Cabe Merah', 9),
(11, 'Cabe Rawit', 10),
(12, 'Daging Kerbau', 11),
(13, 'Daging Kuda', 11),
(14, 'Daging Sapi Potong', 11),
(15, 'Daging Sapi Perah', 11),
(16, 'Daging Babi', 11),
(17, 'Daging Domba', 11),
(18, 'Daging Kambing', 11),
(19, 'Daging Kelinci', 11),
(20, 'Daging Ayam Buras', 11),
(21, 'Daging Ayam Ras Pedaging', 11),
(22, 'Daging Ayam Ras Petelur', 11),
(23, 'Daging Burung Dara', 11),
(24, 'Daging Burung Puyuh', 11),
(25, 'Daging Itik', 11),
(26, 'Daging Entok', 11),
(27, 'Susu Sapi Perah', 12),
(28, 'Susu Kambing Perah', 12),
(29, 'Telur Ayam Buras', 13),
(30, 'Telur Ayam Ras Petelur', 13),
(31, 'Telur Burung Puyuh', 13),
(32, 'Telur Itik', 13),
(33, 'Telur Entok', 13),
(34, 'Ikan Tangkap Laut', 14),
(35, 'Ikan Tangkap PU', 14),
(36, 'Ikan Budidaya', 14),
(37, 'Ikan Olahan', 14),
(38, 'Gula', 15);

-- --------------------------------------------------------

--
-- Table structure for table `kategori`
--

CREATE TABLE `kategori` (
  `kat_id` int(3) NOT NULL,
  `kat_nama` varchar(25) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `kategori`
--

INSERT INTO `kategori` (`kat_id`, `kat_nama`) VALUES
(1, 'Dinas Pertanian'),
(2, 'Dinas Peternakan'),
(3, 'Dinas Perikanan');

-- --------------------------------------------------------

--
-- Table structure for table `kecamatan`
--

CREATE TABLE `kecamatan` (
  `kec_id` char(3) NOT NULL,
  `kec_nama` varchar(30) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `kecamatan`
--

INSERT INTO `kecamatan` (`kec_id`, `kec_nama`) VALUES
('01', 'KABUPATEN MALANG'),
('APG', 'AMPELGADING'),
('BLW', 'BULULAWANG'),
('BTR', 'BANTUR'),
('DAU', 'DAU'),
('DNO', 'DONOMULYO'),
('DPT', 'DAMPIT'),
('GDG', 'GEDANGAN'),
('GDL', 'GONDANGLEGI'),
('JBG', 'JABUNG'),
('KPJ', 'KEPANJEN'),
('KPL', 'KARANGPLOSO'),
('KPR', 'KALIPARE'),
('KRM', 'KROMENGAN'),
('KSB', 'KASEMBON'),
('LWG', 'LAWANG'),
('NGT', 'NGANTANG'),
('NJM', 'NGAJUM'),
('PCM', 'PONCOKUSUMO'),
('PGK', 'PAGAK'),
('PGL', 'PAGELARAN'),
('PJN', 'PUJON'),
('PKJ', 'PAKISAJI'),
('PKS', 'PAKIS'),
('SGR', 'SINGOSARI'),
('SMW', 'SUMBERMANJING WETAN'),
('SPC', 'SUMBERPUCUNG'),
('TJN', 'TAJINAN'),
('TMP', 'TUMPANG'),
('TRN', 'TUREN'),
('TYD', 'TIRTOYUDO'),
('WGR', 'WAGIR'),
('WJK', 'WAJAK'),
('WNS', 'WONOSARI');

-- --------------------------------------------------------

--
-- Table structure for table `komoditas`
--

CREATE TABLE `komoditas` (
  `kmd_id` int(6) NOT NULL,
  `kmd_nama` varchar(30) NOT NULL,
  `kategori_kat_id` int(3) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `komoditas`
--

INSERT INTO `komoditas` (`kmd_id`, `kmd_nama`, `kategori_kat_id`) VALUES
(1, 'Padi', 1),
(2, 'Jagung', 1),
(3, 'Kedelai', 1),
(4, 'Ubi kayu', 1),
(5, 'Ubi jalar', 1),
(6, 'Kacang tanah', 1),
(7, 'Kacang hijau', 1),
(8, 'Bawang', 1),
(9, 'Cabe Merah', 1),
(10, 'Cabe Rawit', 1),
(11, 'Daging', 2),
(12, 'Susu', 2),
(13, 'Telur', 2),
(14, 'Ikan', 3),
(15, 'Gula', 1);

-- --------------------------------------------------------

--
-- Table structure for table `login`
--

CREATE TABLE `login` (
  `id` int(11) NOT NULL,
  `username` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL,
  `level` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `login`
--

INSERT INTO `login` (`id`, `username`, `password`, `level`) VALUES
(1, 'roy', 'e3966862191604ddd269f41071678a49', 'admin'),
(2, 'putra', '4b301ed6752dc8e0d96cc6d7b84fc16d', 'admin'),
(3, 'Budi', '55d30299d26fc94d9f6b6e744d5527ac', 'Dinas Ketahanan Pangan'),
(4, 'Andi', '8f083b1d60dd039ce6691b2bd82e6a37', 'Dinas Pertanian'),
(5, 'William', '78d4e3965b8cd19c6da61424ff2f026c', 'Dinas Perikanan'),
(6, 'Joni', '0342a186a11ad7c8548e13a7fc7d5ac7', 'Dinas Peternakan'),
(7, 'Reni', 'e9e5573781e2e2aa4362d1fb1f81b8e0', 'Dinas Ketahanan Pangan');

--
-- Indexes for dumped tables
--

--
-- Indexes for table `data_kebutuhan`
--
ALTER TABLE `data_kebutuhan`
  ADD PRIMARY KEY (`keb_id`),
  ADD KEY `data_kebutuhan_data_konsumsi` (`keb_kons_id`);

--
-- Indexes for table `data_komoditas`
--
ALTER TABLE `data_komoditas`
  ADD PRIMARY KEY (`id`),
  ADD KEY `data_komoditas_detil_komoditas` (`det_kmd_id`),
  ADD KEY `data_komoditas_kecamatan` (`kec_id`);

--
-- Indexes for table `data_konsumsi`
--
ALTER TABLE `data_konsumsi`
  ADD PRIMARY KEY (`kons_id`),
  ADD KEY `data_konsumsi_detil_komoditas` (`kons_det_kmd_id`),
  ADD KEY `data_konsumsi_kecamatan` (`kons_kec_id`);

--
-- Indexes for table `data_penduduk`
--
ALTER TABLE `data_penduduk`
  ADD PRIMARY KEY (`pend_id`),
  ADD KEY `data_penduduk_kecamatan` (`pend_kec_id`);

--
-- Indexes for table `detil_komoditas`
--
ALTER TABLE `detil_komoditas`
  ADD PRIMARY KEY (`det_kmd_id`),
  ADD KEY `detil_komoditas_komoditas` (`komoditas_kmd_id`);

--
-- Indexes for table `kategori`
--
ALTER TABLE `kategori`
  ADD PRIMARY KEY (`kat_id`);

--
-- Indexes for table `kecamatan`
--
ALTER TABLE `kecamatan`
  ADD PRIMARY KEY (`kec_id`);

--
-- Indexes for table `komoditas`
--
ALTER TABLE `komoditas`
  ADD PRIMARY KEY (`kmd_id`),
  ADD KEY `komoditas_kategori` (`kategori_kat_id`);

--
-- Indexes for table `login`
--
ALTER TABLE `login`
  ADD PRIMARY KEY (`id`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `data_kebutuhan`
--
ALTER TABLE `data_kebutuhan`
  MODIFY `keb_id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `data_komoditas`
--
ALTER TABLE `data_komoditas`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=198;

--
-- AUTO_INCREMENT for table `data_konsumsi`
--
ALTER TABLE `data_konsumsi`
  MODIFY `kons_id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=181;

--
-- AUTO_INCREMENT for table `login`
--
ALTER TABLE `login`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=8;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `data_kebutuhan`
--
ALTER TABLE `data_kebutuhan`
  ADD CONSTRAINT `data_kebutuhan_data_konsumsi` FOREIGN KEY (`keb_kons_id`) REFERENCES `data_konsumsi` (`kons_id`);

--
-- Constraints for table `data_komoditas`
--
ALTER TABLE `data_komoditas`
  ADD CONSTRAINT `data_komoditas_detil_komoditas` FOREIGN KEY (`det_kmd_id`) REFERENCES `detil_komoditas` (`det_kmd_id`),
  ADD CONSTRAINT `data_komoditas_kecamatan` FOREIGN KEY (`kec_id`) REFERENCES `kecamatan` (`kec_id`);

--
-- Constraints for table `data_konsumsi`
--
ALTER TABLE `data_konsumsi`
  ADD CONSTRAINT `data_konsumsi_detil_komoditas` FOREIGN KEY (`kons_det_kmd_id`) REFERENCES `detil_komoditas` (`det_kmd_id`),
  ADD CONSTRAINT `data_konsumsi_kecamatan` FOREIGN KEY (`kons_kec_id`) REFERENCES `kecamatan` (`kec_id`);

--
-- Constraints for table `data_penduduk`
--
ALTER TABLE `data_penduduk`
  ADD CONSTRAINT `data_penduduk_kecamatan` FOREIGN KEY (`pend_kec_id`) REFERENCES `kecamatan` (`kec_id`);

--
-- Constraints for table `detil_komoditas`
--
ALTER TABLE `detil_komoditas`
  ADD CONSTRAINT `detil_komoditas_komoditas` FOREIGN KEY (`komoditas_kmd_id`) REFERENCES `komoditas` (`kmd_id`);

--
-- Constraints for table `komoditas`
--
ALTER TABLE `komoditas`
  ADD CONSTRAINT `komoditas_kategori` FOREIGN KEY (`kategori_kat_id`) REFERENCES `kategori` (`kat_id`);
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
